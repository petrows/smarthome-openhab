rule "BTN1 Switch (KG desktop)"
when
    Channel "mqtt:topic:openhab:mi-button-5b2d:click" triggered
then

	var actionName = receivedEvent.getEvent()
	logInfo("mi-button", "Btn1: " + actionName)
	
	switch(actionName) {
		case "single": {
			if (yel_petro_ds_sw.state == ON) {
				yel_petro_ds_sw.sendCommand(OFF);
			} else {
				yel_petro_ds_sw.sendCommand(ON);
			}
		}
		case "double": {
			g_light_kg.sendCommand(OFF);
		}
		case "long": {
			// g_kg_light.sendCommand(OFF);
			
			if (yel_petro_ds_brightness.state == 1) {
				yel_petro_ds_brightness.sendCommand(100);
			} else {
				yel_petro_ds_brightness.sendCommand(1);
			}
		}
		case "long_release": {
			// <ACTION>
		}
	} 
end

rule "BTN2 Switch (KG light)"
when
    Channel "mihome:sensor_switch:7811dc6c95de:158d0001e612b9:button" triggered
then
	var actionName = receivedEvent.getEvent()
	logInfo("mi-button", "Btn2: " + actionName)
	
	switch(actionName) {
		case "SHORT_PRESSED": {
			g_light_kg.sendCommand(OFF);
		}
		case "DOUBLE_PRESSED": {
			g_light_kg.sendCommand(ON);			
		}
		case "LONG_PRESSED": {
			g_light_kg.sendCommand(OFF);
		}
		case "LONG_RELEASED": {
			// <ACTION>
		}
	}
end

rule "Cube Petro"
when
    Channel 'mihome:sensor_cube:7811dc6c95de:158d00029bf66a:action' triggered
then
    var actionName = receivedEvent.getEvent()
    switch(actionName) {
        case "MOVE": {
            // ?
        }
        case "ROTATE_RIGHT": {
            yel_petro_ds_brightness.sendCommand((yel_petro_ds_brightness.state as Number) + 10)
        }
        case "ROTATE_LEFT": {
            yel_petro_ds_brightness.sendCommand((yel_petro_ds_brightness.state as Number) - 10)
        }
        case "FLIP90": {
            //<ACTION>
        }
        case "FLIP180": {
            if (yel_petro_ds_sw.state == ON) {
				yel_petro_ds_sw.sendCommand(OFF);
			} else {
				yel_petro_ds_sw.sendCommand(ON);
			}
        }
        case "TAP_TWICE": {
            //<ACTION>
        }
        case "SHAKE_AIR": {
            // <ACTION>
        }
        case "FREE_FALL": {
            // <ACTION>
        }
        case "ALERT": {
            // <ACTION>
        }
    }
end
